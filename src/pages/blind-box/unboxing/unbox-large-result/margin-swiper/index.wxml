<swiper class="margin-swiper {{autoSwipe ? 'auto' : ''}}" previous-margin="50px" next-margin="50px" bind:change="onSwiperChange" bind:animationfinish="onSwiperFinish" bind:animationend="onAnimationEnd" current="{{current}}">
  <swiper-item wx:for="{{items}}" wx:key="value" class="{{func.indexClass(index, current)}}">
    <view class="swiper-item {{func.indexClass(index, current)}}" data-index="{{index}}" bind:tap="handleChangeCurrent">
      <flip-card flip="{{item.flip}}" bind:flipEnd="onFlipEnd">
        <view slot="front" class="card-face">
          <image class="card-img" src="{{'https://objects.buff-box.com/' + item.extra.bagPic}}" mode="aspectFit"></image>
          <image class="lightning" src="https://img.war6sky.com/2024/08/22275008f93b40c48f761f167d9f5103.png"></image>
        </view>
        <view slot="back" class="card-face">
          <image class="card-img" src="https://img.war6sky.com/2024/08/85f95f16088048ee937374b58bad37a9.png"></image>
          <image class="lightning" src="https://img.war6sky.com/2024/08/22275008f93b40c48f761f167d9f5103.png"></image>
        </view>
      </flip-card>
    </view>
  </swiper-item>
</swiper>
<view class="btn-wrap">
  <view wx:if="{{!autoSwipe && !allFlipped}}" class="action-btn" bind:tap="handleAction">一键全开</view>
  <view wx:if="{{allFlipped}}" class="action-btn" bind:tap="handleAction">返回</view>
</view>

<wxs module="func">
  module.exports = {
    indexClass: function (index, current) {
      var diff = index - current;

      if (diff === 1) {
        return 'right-item';
      }

      if (diff === -1) {
        return 'left-item';
      }

      return '';
    },
  };
</wxs>