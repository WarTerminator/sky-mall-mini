<!--拆包结果 小于9张-->
<wxs module="func" src="./func.wxs"></wxs>

<view class="unbox-result">
  <view wx:for="{{cards}}" wx:key="value" class="card-wrap card-wrap-{{index}}" style="z-index: {{item.overview ? 200 : 99 - index}}">
    <view class="card-zoom-wrap {{item.inPosition ? 'inPosition' : ''}}">
      <flip-card id="flip-card-{{index}}" flip="{{item.inPosition && !item.special}}" clickFlip="{{item.special}}" data-index="{{index}}" bind:flipStart="onFlipStart" bind:flipEnd="onFlipEnd">
        <view slot="front" class="card-face card-front {{item.special ? 'special' : ''}}" data-index="{{index}}" bind:tap="onCardFrontClick">
          <image class="card-img" src="{{'https://objects.buff-box.com/' + item.extra.bagPic}}" mode="aspectFit"></image>
          <image wx:if="{{item.special}}" class="lightning" src="https://img.war6sky.com/2024/08/22275008f93b40c48f761f167d9f5103.png"></image>
        </view>
        <view slot="back" class="card-face card-back">
          <block wx:if="{{item.special}}">
            <image class="card-img" src="https://img.war6sky.com/2024/08/85f95f16088048ee937374b58bad37a9.png"></image>
            <image class="lightning" src="https://img.war6sky.com/2024/08/22275008f93b40c48f761f167d9f5103.png"></image>
          </block>
          <image wx:else class="card-img" src="https://img.war6sky.com/2024/08/9ac44cad87834864ac05f5f75d530372.png"></image>
        </view>
      </flip-card>
    </view>
  </view>
  <view wx:if="{{func.getSomeOverview(cards)}}" class="overview-mask" bind:tap="handleTakeBackCard"></view>
  <view wx:if="{{func.getAllInPosition(cards)}}" class="btn-wrap">
    <block wx:if="{{func.getAllFlipped(cards)}}">
      <view class="close-btn" bind:tap="handleClose">继续抽卡</view>
      <view class="jump-btn" bind:tap="jumpToStorageLocker">去发货</view>
    </block>
    <view wx:else class="flip-btn" bind:tap="handleFlipCard">点击翻卡</view>
  </view>
</view>